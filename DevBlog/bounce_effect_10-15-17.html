<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=320, height=device-height, target-densitydpi=medium-dpi"/>
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Jacob Wilson - Game/Software Developer</title>

    <!-- Bootstrap core CSS -->
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/blog-post.css" rel="stylesheet">

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    </nav>

    <!-- Page Content -->
    <div class="container">

      <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-10 col-center">

          <!-- Title -->
          <h1 class="mt-4">Bounce Shader Effect</h1>

          <hr>

          <!-- Date/Time -->
          <p>Language: C# (Unity), Unity ShaderLab</p>

          <hr>

          <!-- Preview Image -->
          <div class="txt-center">
            <iframe class="banner-img" src="https://www.youtube.com/embed/1Gef3Wu7xLw" frameborder="0" allowfullscreen"></iframe>
          </div>

          <hr>

          <!-- Post Content -->
          <p class="lead">I watched a GDC talk by a Fortnite developer who spoke about the construction and destruction of the enviroment. I programmed the base vertex shader which creates the stylized bounce effect when an object is impacted.</p>

          <p>For the effect I knew I would need to pass an impact location, impact direction and the radius about that point I wanted the model to modulate. I started by creating a gameplay script which would gather this information based on a mouse click, however if this were to be implemented in a game the vectors would be substitued for the forward (or specified vector) of the object. For the mouse a raycast was done to gather the information needed, then passed to shader properties of the respective object. The radius of undulation was determined by a constant magnitude and a curve set for the specific object, which allowed different objects to have different radi decay curves. From the video, it seemed that the point of impact was only used to determine if the object was hit. I decided that the point of impact would affect the radius, such that farther from the center would have less of an impact, ie the radius would be smaller. The texture for the cracking was cycled through texture presets (generated by Cheung Tai Ching) in the script, however they could be substitued for pseudorandom noise generated textures in the future. The wire sphere seen in the images below was used to see the point of impact and radius which would be affected.</p>

          <hr>

          <!-- Preview Image -->
          <div class="txt-center">
            <img class="img-fluid rounded mb-3 mt-2" src="/content/images/graphics/demos/bounce_effect_icon.png" alt="">
            <img class="banner-img-2 img-fluid rounded" src="/content/images/graphics/demos/bounce_effect_0.png" alt="">
            <img class="banner-img-2 img-fluid rounded" src="/content/images/graphics/demos/bounce_effect_1.png" alt="">
          </div>

          <hr>
          
          <p>With the gameplay script passing the shader the needed parameters, I focused on implementing the vertex code. The speaker from the GDC video displayed a decay curve which was hand generated, however looked too similar to a dampened sinusoidal curve for me to ignore. I decided rather than having a hand manipulated curve I would use the formula for a dampened sinusoid:</p>

          <code class="block text-center">y(t) = A &middot; e<sup>-&lambda; t</sup> &middot; (cos(&omega;t + &phi;) + sin(&omega;t + &phi;))</code>

          <p class="text-right">-"Dampened sine wave" Wikipedia</p>

          <p>I determined the distance from the impact point to the current vertex, then had a hard cutoff that if the point was outside that radius the vertex wouldn't be shifted. If the point was inside the radius, the vertex would be moved by the curve which had a decay effect so the center was further perturbed than the outer rim. To further develop the code, I should remove the hard limit cutoff at the rim of the radius and have a ease in shape. The time for the dampened sine wave equation was updated from a coroutine in the gameplay script.</p>

        </div>

      </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-3 bg-dark">
          <p class="m-0 text-center text-white mb-3">Updated on October 15, 2017</p>
          <div id="footer"></div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/popper/popper.min.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script>
      $(function() {
        $("#footer").load("/content/footer.html");
        $("nav").load("/content/navigation.html");
      });
    </script>

  </body>

</html>